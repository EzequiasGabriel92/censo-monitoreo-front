"use strict";(self.webpackChunkcenso_monitoreo_front=self.webpackChunkcenso_monitoreo_front||[]).push([[637],{9637:(U,c,l)=>{l.r(c),l.d(c,{LoginModule:()=>q});var m=l(9808),a=l(4032),o=l(2382),e=l(1223),d=l(9305),g=l(3372);function f(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",2)(1,"h3",3),e._uU(2,"Registro inicial de usuario"),e.qZA(),e.TgZ(3,"form",4)(4,"div",5)(5,"label",6),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"div",5)(9,"label",6),e._uU(10,"Password"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",5)(13,"label",6),e._uU(14,"C\xe9dula de identidad"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"div",5)(17,"label",6),e._uU(18,"Apellidos"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"div",5)(21,"label",6),e._uU(22,"Nombres"),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.TgZ(24,"div",5)(25,"label",6),e._uU(26,"Municipio"),e.qZA(),e._UZ(27,"input",12),e.qZA(),e.TgZ(28,"div",5)(29,"label",6),e._uU(30,"Localidad"),e.qZA(),e._UZ(31,"input",13),e.qZA(),e.TgZ(32,"div",5)(33,"label",6),e._uU(34,"Direccion"),e.qZA(),e._UZ(35,"input",14),e.qZA(),e.TgZ(36,"div",5)(37,"label",6),e._uU(38,"Telefono fijo"),e.qZA(),e._UZ(39,"input",15),e.qZA(),e.TgZ(40,"div",5)(41,"label",6),e._uU(42,"Telefono Celular"),e.qZA(),e._UZ(43,"input",16),e.qZA(),e.TgZ(44,"div",17)(45,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.registerUser())}),e._uU(46,"Registrar usuario"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.form_register_user)}}function h(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",2)(1,"h3",3),e._uU(2,"Registro inicial de administrador"),e.qZA(),e.TgZ(3,"form",4)(4,"div",5)(5,"label",6),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"div",5)(9,"label",6),e._uU(10,"Password"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",5)(13,"label",6),e._uU(14,"C\xe9dula de identidad"),e.qZA(),e._UZ(15,"input",19),e.qZA(),e.TgZ(16,"div",5)(17,"label",6),e._uU(18,"Apellidos"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"div",5)(21,"label",6),e._uU(22,"Nombres"),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.TgZ(24,"div",17)(25,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.registerUserAdmin())}),e._uU(26,"Registrar administrador"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.form_register_admin)}}const v=[{path:"",component:(()=>{class r{constructor(t,i,n,u){this.fb=t,this.requestService=i,this.router=n,this.utilsService=u,this.exist=!1}ngOnInit(){this.createForm()}createForm(){this.formLogin=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required]]})}register(t){localStorage.setItem("view",t),this.router.navigate(["register"])}get f(){return this.formLogin}saveUser(){this.formLogin.valid&&this.getAllUser()}saveUserAdmin(){this.formLogin.valid&&this.getAllUserAdmins()}getAllUserAdmins(){this.utilsService.start(),this.requestService.get("admins").subscribe(t=>{t&&(this.utilsService.stop(),0===t.length&&window.alert("No existen usuarios registrados"),t.forEach(i=>{i.email==this.formLogin.controls.email.value&&i.password==this.formLogin.controls.password.value&&(this.exist=!0,localStorage.setItem("admins",JSON.stringify(i)),this.router.navigate(["dashboard"]))}),this.exist||window.alert("El email o el password es equivocado"))},t=>{this.utilsService.stop(),window.alert(t.message),console.log(t)})}getAllUser(){this.utilsService.start(),this.requestService.get("users").subscribe(t=>{t&&(this.utilsService.stop(),0===t.length&&window.alert("No existen usuarios registrados"),t.forEach(i=>{i.email==this.formLogin.controls.email.value&&i.password==this.formLogin.controls.password.value&&(this.exist=!0,localStorage.setItem("user",JSON.stringify(i)),this.router.navigate(["user"]))}),this.exist||window.alert("El email o el password es equivocado"))},t=>{this.utilsService.stop(),console.log(t),window.alert(t.message)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(d.s),e.Y36(a.F0),e.Y36(g.F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:24,vars:3,consts:[[1,"container","my-5","m-auto"],[1,"row"],[1,"col-12"],[1,"text-primary","text-center"],["action","",1,"form-row",3,"formGroup"],["for",""],["type","email","placeholder","Ingrese su correo el\xe9ctronico","formControlName","email",1,"form-control","my-3"],["type","password","placeholder","Ingrese su contrase\xf1a","formControlName","password",1,"form-control","my-3"],[1,"text-center","d-block","my-3"],["type","submit",1,"btn","btn-primary","text-center","btn-lg",3,"disabled","click"],[1,"col-12","my-3","text-center"],[1,"link-info","link","text-decoration-none",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Inicia Session"),e.qZA(),e.TgZ(5,"form",4)(6,"label",5),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",6),e.TgZ(9,"label",5),e._uU(10,"Password"),e.qZA(),e._UZ(11,"input",7),e.qZA(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.saveUser()}),e._uU(14,"Ingresa como Usuario"),e.qZA()(),e.TgZ(15,"div",8)(16,"button",9),e.NdJ("click",function(){return i.saveUserAdmin()}),e._uU(17,"Ingresa como Administrador"),e.qZA()()(),e.TgZ(18,"div",10)(19,"a",11),e.NdJ("click",function(){return i.register("user")}),e._uU(20,"Registrar"),e.qZA()(),e.TgZ(21,"div",10)(22,"a",11),e.NdJ("click",function(){return i.register("admin")}),e._uU(23,"Registrar administrador"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",i.formLogin),e.xp6(8),e.Q6J("disabled",!i.f.valid),e.xp6(3),e.Q6J("disabled",!i.f.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),r})()},{path:"register",component:(()=>{class r{constructor(t,i,n,u){this.fb=t,this.requestService=i,this.router=n,this.utilService=u,this.view_tab="user",this.register=""}ngOnInit(){this.register=localStorage.getItem("view"),this.register&&(this.view_tab=this.register),this.createFormUser(),this.createFormAdmin()}createFormUser(){this.form_register_user=this.fb.group({email:["",[o.kI.required]],password:["",[o.kI.required]],cedula:["",[o.kI.required]],lastnames:["",[o.kI.required]],names:["",[o.kI.required]],municipio:["",[o.kI.required]],localidad:["",[o.kI.required]],direccion:["",[o.kI.required]],phone:["",[o.kI.required]],phone_fijo:["",[o.kI.required]]})}createFormAdmin(){this.form_register_admin=this.fb.group({email:["",[o.kI.required]],password:["",[o.kI.required]],cedula:["",[o.kI.required]],lastnames:["",[o.kI.required]],names:["",[o.kI.required]]})}registerUserAdmin(){this.form_register_admin.valid&&(this.utilService.start(),this.requestService.post("admins",this.form_register_admin.value).subscribe(i=>{this.utilService.stop(),window.alert("Usuario Creado"),this.router.navigate([""])},i=>{this.utilService.stop(),window.alert(i.message),console.log(i)}))}registerUser(){if(this.form_register_user.valid){this.utilService.start();const t=this.form_register_user.value;t.virus="No aplica",t.atendido="No",t.s\u00edntomas="No",this.requestService.post("users",t).subscribe(i=>{this.utilService.stop(),window.alert("Usuario Creado"),this.router.navigate([""])},i=>{this.utilService.stop(),window.alert(i.message),console.log(i)})}else window.alert("Todos los campos son obligatorios")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(d.s),e.Y36(a.F0),e.Y36(g.F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:3,vars:2,consts:[[1,"container","my-5","m-auto"],["class","row",4,"ngIf"],[1,"row"],[1,"text-primary","text-center"],["action","",1,"form-row","row",3,"formGroup"],[1,"col-12","col-lg-3"],["for",""],["type","email","placeholder","Ingrese su correo el\xe9ctronico","formControlName","email",1,"form-control","my-3"],["type","password","placeholder","Ingrese su contrase\xf1a","formControlName","password",1,"form-control","my-3"],["type","text","placeholder","Ingrese su documento","formControlName","cedula",1,"form-control","my-3"],["type","text","placeholder","Ingrese sus apellidos","formControlName","lastnames",1,"form-control","my-3"],["type","text","placeholder","Ingrese sus nombres","formControlName","names",1,"form-control","my-3"],["type","text","placeholder","Ingrese su Municipio de residencia","formControlName","municipio",1,"form-control","my-3"],["type","text","placeholder","Ingrese su localidad","formControlName","localidad",1,"form-control","my-3"],["type","text","placeholder","Ingrese su direccion","formControlName","direccion",1,"form-control","my-3"],["type","text","placeholder","Ingrese su telefono fijo","formControlName","phone_fijo",1,"form-control","my-3"],["type","text","placeholder","Ingrese su telefono celular","formControlName","phone",1,"form-control","my-3"],[1,"text-center","my-3"],["type","submit",1,"btn","btn-primary","text-center","btn-lg",3,"click"],["type","text","placeholder","Ingrese su docuemnto","formControlName","cedula",1,"form-control","my-3"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,f,47,1,"div",1),e.YNc(2,h,27,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","user"===i.view_tab),e.xp6(1),e.Q6J("ngIf","admin"===i.view_tab))},dependencies:[m.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),r})()}];let Z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[a.Bz.forChild(v),a.Bz]}),r})();var _=l(4349);let q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,_.m,o.UX,o.u5,Z]}),r})()}}]);